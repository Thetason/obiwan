# 🔧 오비완 v3 - 고도화된 디버그 도구 가이드

## 📋 목차
1. [디버그 도구 개요](#디버그-도구-개요)
2. [실시간 디버그 오버레이](#실시간-디버그-오버레이)
3. [성능 모니터링 대시보드](#성능-모니터링-대시보드)
4. [네트워크 디버그 패널](#네트워크-디버그-패널)
5. [오디오 디버그 패널](#오디오-디버그-패널)
6. [사용법 및 제스처](#사용법-및-제스처)
7. [구현된 파일 목록](#구현된-파일-목록)

---

## 🎯 디버그 도구 개요

오비완 v3의 고도화된 디버그 도구는 개발자가 실시간으로 앱의 성능을 모니터링하고 디버깅할 수 있도록 설계된 포괄적인 시스템입니다.

### ✨ 주요 기능
- **실시간 모니터링**: FPS, 메모리, 네트워크, 오디오 실시간 추적
- **시각화**: 성능 데이터를 직관적인 차트와 그래프로 표시
- **네트워크 인터셉터**: 모든 HTTP 요청/응답 자동 로깅
- **오디오 분석**: 실시간 웨이브폼 및 주파수 스펙트럼 분석
- **제스처 제어**: 3손가락 탭으로 디버그 모드 활성화
- **프로덕션 안전**: 릴리즈 빌드에서 자동 제거

---

## 📊 실시간 디버그 오버레이

### 기능
화면 우상단에 플로팅되는 컴팩트한 디버그 패널로 핵심 성능 지표를 실시간으로 표시합니다.

### 표시 정보
- **FPS 카운터**: 현재 프레임률과 상태 표시
- **메모리 사용량**: 현재 메모리 사용량 (MB)
- **프레임 수**: 총 렌더링된 프레임 수
- **오디오 레벨**: 실시간 오디오 입력 레벨
- **피치 분석 레이턴시**: 음성 분석 처리 시간

### 상호작용
- **탭**: 확장/축소 토글
- **드래그**: 패널 위치 이동
- **색상 코딩**: 
  - 🟢 녹색: 정상 (FPS > 50, Memory < 100MB)
  - 🟠 주황색: 주의 (FPS 30-50, Memory 100-200MB)
  - 🔴 빨간색: 경고 (FPS < 30, Memory > 200MB)

---

## 📈 성능 모니터링 대시보드

### 실시간 차트
1. **FPS 그래프**: 초당 프레임 수 변화 추이
2. **메모리 사용량**: 메모리 사용 패턴 모니터링
3. **렌더링 시간**: UI 렌더링에 소요되는 시간
4. **네트워크 처리량**: 네트워크 데이터 전송량

### 병목 지점 히트맵
- **CPU**: 프로세싱 부하 상태
- **Memory**: 메모리 사용률
- **Render**: UI 렌더링 성능
- **Network**: 네트워크 응답성

### 성능 메트릭 카드
각 성능 지표별로 현재 값과 아이콘으로 상태를 표시

---

## 🌐 네트워크 디버그 패널

### 요청 모니터링
- **실시간 로깅**: 모든 HTTP 요청/응답 자동 캡처
- **상세 정보**: 요청 시간, 응답 시간, 데이터 크기 기록
- **상태 추적**: 성공/실패 상태 시각화
- **필터링**: 메서드별, URL 패턴별, 에러만 보기

### 통계 대시보드
- **총 요청 수**: 누적 네트워크 요청 수
- **성공률**: 성공한 요청의 비율
- **평균 응답 시간**: 네트워크 성능 지표
- **데이터 전송량**: 총 전송된 데이터 크기

### 개발자 도구
- **cURL 내보내기**: 요청을 cURL 명령어로 변환
- **요청 기록 내보내기**: JSON 형태로 전체 기록 저장
- **재실행 기능**: 실패한 요청을 다시 실행

---

## 🎵 오디오 디버그 패널

### 실시간 웨이브폼
- **시각화**: 현재 오디오 입력의 웨이브폼 표시
- **레벨 모니터링**: 현재/최대/평균 오디오 레벨
- **애니메이션**: 부드러운 실시간 업데이트

### 주파수 스펙트럼 분석
- **FFT 분석**: 실시간 주파수 스펙트럼 계산
- **기본 주파수**: 보컬의 기본 주파수 탐지
- **배음 분석**: 배음(harmonics) 추출 및 표시
- **해상도 표시**: 주파수 분해능 정보

### 오디오 시스템 상태
- **버퍼 상태**: 언더런/오버런 모니터링
- **처리 지연시간**: 오디오 처리 레이턴시
- **샘플 정보**: 샘플레이트, 비트 깊이, 채널 수
- **권한 상태**: 마이크 권한 상태 확인

### 설정 정보
- **오디오 설정**: 현재 오디오 구성 표시
- **권한 관리**: 마이크 권한 요청 기능

---

## 🎮 사용법 및 제스처

### 디버그 모드 활성화
1. **자동 활성화**: 디버그 빌드에서 자동으로 활성화
2. **제스처 활성화**: 빠르게 3번 탭하기 (3-finger tap 시뮬레이션)
3. **수동 토글**: 코드에서 `debugModeEnabled` 플래그 설정

### 패널 조작
- **디버그 오버레이**: 드래그로 위치 이동, 탭으로 확장/축소
- **플로팅 버튼**: 우상단 디버그 버튼으로 전체 대시보드 열기
- **대시보드**: 각 패널별로 개별 토글 가능

### 빠른 액세스
- **성능 데이터**: 우상단 컴팩트 뷰에서 핵심 지표 확인
- **전체 분석**: 플로팅 버튼으로 상세 분석 대시보드 접근
- **내보내기**: 네트워크 및 성능 데이터 내보내기 기능

---

## 📁 구현된 파일 목록

### 메인 파일
- `/lib/main.dart` - 디버그 모드 통합 및 초기화
- `/lib/widgets/debug_dashboard.dart` - 통합 디버그 대시보드

### 디버그 위젯
- `/lib/widgets/debug_overlay.dart` - 실시간 디버그 오버레이
- `/lib/widgets/performance_monitor.dart` - 성능 모니터링 대시보드
- `/lib/widgets/network_debug_panel.dart` - 네트워크 디버그 패널
- `/lib/widgets/audio_debug_panel.dart` - 오디오 디버그 패널

### 코어 시스템
- `/lib/core/network_interceptor.dart` - 네트워크 인터셉터 및 로깅

### 의존성
- `/pubspec.yaml` - 추가된 디버그 도구 의존성 (`fl_chart`, `package_info_plus`)

---

## 🚀 실행 및 테스트

### 디버그 모드에서 실행
```bash
# 디버그 모드로 앱 실행
flutter run --debug

# 또는 릴리즈 모드 (디버그 도구 비활성화)
flutter run --release
```

### 기능 테스트
1. **앱 시작**: 디버그 오버레이가 우상단에 표시
2. **3번 탭**: 디버그 모드 활성화 확인
3. **오버레이 조작**: 드래그 및 탭 테스트
4. **대시보드 열기**: 플로팅 버튼으로 전체 기능 확인
5. **각 패널 확인**: 성능, 네트워크, 오디오 패널 동작 테스트

### 프로덕션 빌드 확인
```bash
# 릴리즈 빌드에서 디버그 도구가 포함되지 않는지 확인
flutter build apk --release
flutter build ios --release
```

---

## ⚠️ 주의사항

1. **성능 영향**: 디버그 도구는 성능에 약간의 영향을 줄 수 있습니다
2. **메모리 사용**: 실시간 데이터 수집으로 추가 메모리가 필요합니다
3. **프로덕션 배포**: 릴리즈 빌드에서는 자동으로 제거됩니다
4. **권한**: 오디오 디버그 기능에는 마이크 권한이 필요합니다

---

## 🔧 커스터마이징

디버그 도구는 필요에 따라 확장하거나 수정할 수 있습니다:

- **새로운 메트릭 추가**: `DebugOverlay`에 추가 성능 지표 구현
- **차트 커스터마이징**: `PerformanceMonitor`의 차트 설정 변경
- **네트워크 필터링**: `NetworkInterceptor`에 맞춤 필터링 로직 추가
- **오디오 분석**: `AudioDebugPanel`에 추가 오디오 분석 기능 구현

이 고도화된 디버그 도구를 통해 오비완 v3 앱의 성능을 실시간으로 모니터링하고 최적화할 수 있습니다! 🚀