# 🚨 중요한 개발 실수 및 교훈

## 2025-08-12: SPICE 주파수 보정 오류 사건

### ❌ **발생한 문제**
- 사용자가 낮은 음역(80-150Hz)을 불렀으나
- SPICE 서버가 **1.94배~3.25배** 부풀려서 300-500Hz로 잘못 분석
- 사용자: "4쪽 영역 소리는 안 냈는데 계속 높은 음으로 분석된다"

### 💀 **개발자의 치명적 실수들**

1. **기존 코드 맹신**
   - `correctionFactor` 로직이 "이미 검증된 것"이라고 가정
   - 과거 코드를 의심 없이 신뢰

2. **사용자 피드백 오해**
   - "너무 많은 음표 감지"에만 집중
   - **"음정 자체가 완전히 틀렸다"는 핵심 놓침**

3. **로그 분석 무능**
   - SPICE: 155Hz → 400Hz 변환을 보고도
   - "보정이 정상 작동한다"고 착각

4. **실제 테스트 부족**
   - 기계적 수치 테스트만 수행
   - **실제 사용자 음성과 결과 비교 안 함**

### 🎯 **올바른 대응 방법**

#### 사용자가 "음정이 틀렸다"고 하면:
1. **즉시 주파수 정확도 체크**
2. **보정/변환 코드 우선 의심**
3. **알려진 주파수로 단위 테스트**
4. **사용자 실제 음성과 분석 결과 직접 비교**

#### 로그 분석 철칙:
- 주파수가 **2배 이상 변하면 즉시 의심**
- "보정" 코드일수록 **더 철저히 검증**
- 원본 → 변환 과정을 **단계별로 추적**

### 📋 **새로운 개발 철칙**

#### 🚨 **사용자 피드백 해석 우선순위**
1. **"음정/주파수가 틀렸다"** → 최우선 주파수 정확도 검증
2. **"결과가 이상하다"** → 알고리즘 로직 검토
3. **"너무 많다/적다"** → 필터링/임계값 조정

#### 🔍 **기존 코드 의심 원칙**
- **보정/변환 코드** → 가장 의심스러운 코드
- **상수/계수** → 왜 이 값인지 근거 확인
- **"이미 작동한다"** → 실제 테스트로 재검증

#### ⚡ **즉시 중단 신호**
다음 상황에서는 **즉시 개발 중단하고 근본 원인 찾기**:
- 사용자: "내가 낸 음과 다르다"
- 로그: 주파수 2배 이상 변화
- 테스트: 알려진 입력에 예상과 다른 출력

### 💡 **예방 체크리스트**

#### 새 기능 개발 시:
- [ ] 알려진 입력으로 정확한 출력 확인
- [ ] 사용자 관점에서 실제 테스트
- [ ] 보정/변환 코드의 근거와 검증
- [ ] 로그에서 비정상적 수치 변화 모니터링

#### 버그 수정 시:
- [ ] 사용자 피드백의 핵심 키워드 파악
- [ ] 근본 원인 vs 증상 구분
- [ ] 기존 코드 무조건 의심
- [ ] 실제 사용 시나리오로 재현

---

## 결론

**"기존 코드를 의심하고, 사용자 피드백의 핵심을 놓치지 말고, 실제 데이터로 검증하라"**

이 사건으로 인해 사용자가 겪은 불편함에 대해 깊이 반성하며, 
앞으로는 이런 기본적인 실수를 절대 반복하지 않겠다.